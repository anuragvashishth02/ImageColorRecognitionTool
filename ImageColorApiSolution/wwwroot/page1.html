<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image Upload & About</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h2 {
            margin-top: 40px;
            color: #333;
        }

        .upload-card {
            margin-top: 30px;
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            width: 90%;
            max-width: 500px;
        }

        input[type="file"] {
            margin-top: 20px;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #ccc;
            width: 80%;
            cursor: pointer;
        }

        button {
            margin-top: 20px;
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            background: #4CAF50;
            color: white;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover {
            background: #45a049;
        }

        /* About Section */
        #about {
            margin-top: 40px;
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 90%;
            text-align: center;
        }

        #about h3 {
            margin-bottom: 15px;
            color: #333;
        }

        #about p {
            line-height: 1.6;
            color: #555;
        }
    </style>
</head>
<body>

    <h2>Upload Your Image</h2>

    <div class="upload-card">
        <input type="file" id="fileInput" accept="image/*">
        <br>
        <button onclick="uploadImage()">Upload & Go to Color Picker</button>
    </div>

    <div id="about">
        <h3>About This Tool</h3>
        <p>
            This tool allows you to upload an image and explore its colors.
            You can click on the image to get RGB and HEX color codes, view the color history of each image,
            and copy colors for your design projects. Ideal for designers and developers seeking color inspiration!
        </p>
    </div>

    <script>
        async function uploadImage() {
            const fileInput = document.getElementById("fileInput");
            const file = fileInput.files[0];
            if (!file) return alert("Please select a file.");

            const formData = new FormData();
            formData.append("file", file);

            try {
                const res = await fetch("/api/imagecolor/upload", { 
                    method: "POST", 
                    body: formData 
                });

                if (!res.ok) {
                    const errorText = await res.text();
                    throw new Error(errorText || "Upload failed");
                }

                const data = await res.json();
                
                // Save uploaded file name in session for Page 2
                sessionStorage.setItem("uploadedImageName", data.fileName);

                // Redirect to Page 2 (color picker page)
                window.location.href = "page2.html"; 
            } catch (err) {
                alert("Error: " + err.message);
            }
        }
    </script>

</body>
</html>
